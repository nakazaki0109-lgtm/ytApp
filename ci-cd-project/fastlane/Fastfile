platform :ios do
  desc "Build the app"
  lane :build do
    gym(scheme: "YourAppScheme") # Replace with your app's scheme
  end

  desc "Run tests"
  lane :test do
    scan(scheme: "YourAppScheme") # Replace with your app's scheme
  end

  desc "Deploy to TestFlight"
  lane :deploy do
    build
    test
    upload_to_testflight
  end

  after_all do |lane|
    puts "Successfully finished running lane: #{lane}"
  end

  error do |lane, exception|
    puts "Error running lane: #{lane}. Error: #{exception.message}"
  end
end